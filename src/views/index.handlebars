<div class="box">
    {{#if user}}
    <input type="hidden" id="user-cart-id" value="{{user.cart}}">
    <div style="margin-bottom: 10px;">
        <span>Bienvenido, {{user.first_name}}!</span> | 
        <a href="/profile">Mi Perfil</a> | 
        {{#if (eq user.role "admin")}}
        <a href="/realtimeproducts">Gestionar Productos</a> | 
        {{/if}}
        <a href="/logout">Cerrar sesión</a>
    </div>
    {{/if}}
    <div class="view-cart"><a id="button-cart" class="button">Ver Carrito</a></div>
    <h1>Productos</h1>
    <div class="products-box">
        {{#each products}}
            <div class="product-card">
                <h3>{{this.title}}</h3>
                <hr>
                <p>Categoria: {{this.category}}</p>
                <p>Descripción: {{this.description}}</p>
                <p>Precio: $ {{this.price}}</p>
                <p><strong>Stock disponible:</strong> {{this.stock}}</p>
                {{#if (eq this.stock 0)}}
                  <button disabled style="background: #ccc; cursor: not-allowed;">Sin Stock</button>
                {{else}}
                  <button id="button-create" onclick="addToCart('{{this._id}}')">Agregar al Carrito</button>
                {{/if}}
            </div>
        {{/each}}
    </div>
    <div class="footer">
        {{#if prevLink.exist}}
            <a id="button-paginate" class="button" href="{{prevLink.link}}">Anterior</a>
        {{/if}}
        {{#if nextLink.exist}}
            <a id="button-paginate" class="button" href="{{nextLink.link}}">Siguiente</a>
        {{/if}}
    </div>
</div>

<script src="/js/ecommerce.js"></script>